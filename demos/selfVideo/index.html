<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" ><head>    <meta charset="utf-8" />    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />    <meta http-equiv="X-UA-Compatible" content="IE=edge" />    <meta http-equiv="Access-Control-Allow-Origin" content="*" />    <title>直接观看</title>    <link href="styles/bootstrap.css" rel="stylesheet" />    <script src="scripts/jquery-1.11.2.min.js"></script>    <script src="scripts/divresize.js"> </script>    <script src="scripts/crypto-js.js"></script>    <script src="scripts/layui/layui.js"></script>    <!--   	<script src="/frontsource/living/js/alapi.js"></script>     -->    <script src="/frontsource/js/t5player/cyberplayer.js"></script>    <script src="/js/baidusdk/cyberplayer-3.4.1/cyberplayer.js"></script>    <style>        body {            /*font-family: 'Microsoft Yahei';*/            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;            /*background-color: #ededf2;*/        }        h3 {            font-size: 24px;            font-weight: 400;            color: #455266;            margin-top: 10px;            margin-bottom: 10px;            color: #2b2b32;        }        .zhibo-zhuangtai {            color: #fff;            display: inline-block;            font-size: 14px;            font-weight: 300;            padding: 2px 5px;            border-radius: 3px;            margin: 5px 0 0 12px;            position: absolute;        }        .zhibo-zhuangtai.ing {            background-color: #01c867;        }        .zhibo-time {            color: #afafb3;            font-size: 14px;            font-weight: 300;            line-height: 25px;        }        .fl {            float: left;        }        .fr {            float: right;        }        .zhibo-shipin {            height: 650px;            /*background-color: #000000;*/            background: url(/frontsource/living/images/bg_shipin02.png) no-repeat center center;        }        .mimaguankan {            padding-top: 305px;        }        .watch-header {            padding: 20px 0;        }        .area-bottom {            padding: 20px 0;        }        .desc-area {            background: #fff;            border: 1px solid #ececec;        }        .area-section {            margin-bottom: 20px;        }        .h3 {            font-size: 18px;            font-weight: 300;            border-bottom: 1px solid #e1e1e1;            margin-top: 10px;        }        .h3 span {            display: inline-block;            padding: 18px 40px;            border-bottom: 3px solid #1abc9c;        }        .desc {            padding: 18px 40px;            word-break: break-all;            font-weight: 400;        }        .jianjie-text {            line-height: 2;        }        .mima {            display: inline-block;            width: 240px;            height: 40px;            border-radius: 3px;            border-top-right-radius: 0px;            border-bottom-right-radius: 0px;            font-size: 16px;            font-weight: 200;            float: left;            border: 0px solid white;        }        .btn {            width: 80px;            height: 40px;            font-size: 16px;            border-radius: 3px;            border-top-left-radius: 0px;            border-bottom-left-radius: 0px;            background-color: #1abc9c;            border-color: #1abc9c;        }        .btn:hover {            background-color: #1abc9c;            border-color: #1abc9c;        }        .btn-primary {            color: #fff;            background-color: #1fccac;            border-color: #1fccac;        }        @media (max-width: 413px) {            .watch-header {                width: 80%;            }        }        @media (max-width: 767px) {            .zhibo-shipin {                height: 260px;                margin-top: 15px;                /*background: url(images/bg_shipin_xs.png) no-repeat center center;*/            }            .mimaguankan {                padding-top: 110px;            }            .h3 {                margin-top: 5px;                margin-bottom: 10px;                border-bottom: 0px solid #e1e1e1;            }            .h3 span {                padding: 0px 8px;                font-size: 16px;                border-left: 4px solid #1abc9c;                border-bottom: 0px solid #1abc9c;            }            .desc {                padding: 0px 5px 0px 0px;                font-size: 16px;            }            .desc-area {                border: 0px solid #ececec;            }            h3 {                font-size: 17px;                margin-bottom: 2px;            }            .zhibo-time {                font-size: 12px;                font-weight: 200;            }            .zhibo-zhuangtai {                font-size: 10px;                font-weight: 200;                padding: 1px 2px;                margin: 1px 0 0 8px;            }            .watch-header {                padding: 10px 0;                /*position: absolute;*/                top: 272px;                width: 100%;                border-bottom: 1px solid #e1e1e1;            }            .mima {                width: 190px;                height: 34px;            }            .btn {                width: 60px;                height: 34px;            }            .area-bottom {                padding-top: 84px;            }        }        @media (min-width: 320px){            .mimaguankan {                padding-left: 20px;            }            @media (min-width: 375px){                .mimaguankan {                    padding-left: 47px;                }                @media (min-width: 414px){                    .container {                        width: 410px;                    }                    .mimaguankan {                        padding-left: 65px;                    }                    @media (min-width: 768px){                        .container {                            width: 750px;                        }                        .mimaguankan {                            padding-left: 200px;                            padding-top: 205px;                        }                        .zhibo-shipin {                            height: 450px;                        }                    }                    @media (min-width: 992px){                        .container {                            width: 970px;                        }                        .mimaguankan {                            padding-left: 310px;                            padding-top: 305px;                        }                        .zhibo-shipin {                            height: 650px;                        }                    }                    @media (min-width: 1200px){                        .container {                            width: 1170px;                        }                        .mimaguankan {                            padding-left: 410px;                            padding-top: 305px;                        }                        .zhibo-shipin {                            height: 650px;                        }                    }                    .jw-icon-barlogo-new{                        font-size: 20px;                        min-width: 1.5em;                        height: 1em;                        line-height: 1em;                        display: none;                    }    </style></head><body><div class="container">    <div class="row">        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">            <div class="watch-header">                <%if ("playing".equals(lvbMap.getStatus()) && (nowDate.getTime()<=lvbMap.getStopTime().getTime())) {%>                <h3><%=lvbMap.getTheme() %><span class="zhibo-zhuangtai ing">直播中</span></h3>                <%}else if(nowDate.getTime()<lvbMap.getStartTime().getTime()||(nowDate.getTime()<=lvbMap.getStopTime().getTime())){ %>                <h3><%=lvbMap.getTheme() %><span class="zhibo-zhuangtai" style="background-color: #bcb6b6;" >未开始</span></h3>                <%}else{ %>                <h3><%=lvbMap.getTheme() %><span class="zhibo-zhuangtai" style="background-color: red;">已结束</span></h3>                <%} %>                <div class="clearfix zhibo-time">                    <div class="fl">直播时间：<%=DateUtil.dateToStr(lvbMap.getStartTime(), 12) %>~<%=lvbMap.getEndTimes() %></div>                    <!--                    <div class="fr"><span id="num">0</span>人在线</div>                     -->                </div>            </div>        </div>    </div>    <div class="row">        <div id="playDiv" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">            <%if ("playing".equals(lvbMap.getStatus()) && (nowDate.getTime()<=lvbMap.getStopTime().getTime())) {%>            <div id="playercontainer" class="zhibo-shipin">                <div class="mimaguankan">                    <input type="password" class="form-control mima" id="exampleInputPassword1" placeholder="请输入密码观看"/>                    <button type="button" class="btn btn-primary" onclick="checkPwd();" >观看</button>                </div>            </div>            <%}else{ %>            <div id="playercontainer" class="zhibo-shipin" ></div>            <%} %>        </div>    </div>    <div class="row">        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">            <div class="area-bottom clearfix">                <div class="desc-area area-section">                    <div class="h3"><span>直播简介</span></div>                    <div class="desc">                        <p class="jianjie-text"><%=lvbMap.getIntroducton() %></p>                    </div>                </div>            </div>        </div>    </div></div><!-- --><script>    layui.use('layer', function(){        var layer = layui.layer;        $(".mimaguankan").show();    });    var qheight;    /*    $(function(){        setInterval(function(){          //getonlineNum("DescribeLiveStreamOnlineUserNum","tclive.kaifajie.cn","living","1939");        },5000);    });*/    window.onresize = function(){        var height=$("#playDiv").height();//获取当前窗口的高度        var width=$("#playDiv").width();//获取当前窗口的宽度        $("#playercontainer").css("width",width);        if(height <= 10){            height = qheight;        }        $("#playercontainer").css("height",height);    }    //验证密码    function checkPwd(){        var enterPwd = $('#exampleInputPassword1').val();        var realPwd = '<%=realPwd%>';        if(enterPwd==realPwd){            var height=$("#playDiv").height();//获取当前窗口的高度            var width=$("#playDiv").width();//获取当前窗口的宽度            qheight = height;            InitPlayer(width,height);            $(".mimaguankan").hide();        }else{            //密码输入不正确            layer.tips("访问密码输入错误",'#exampleInputPassword1',{tips:1});        }    }    //获取 直播在线观看人数    function getonlineNum(Action,DomainName,AppName,StreamName){        var geturl = DescribeLiveStreamOnlineUserNum(Action,DomainName,AppName,StreamName);        $.ajax({            type:"GET",            url:geturl,            dataType:"json",            success:function(data,textStatus){                var onlinePels = data.OnlineUserInfo.LiveStreamOnlineUserNumInfo[0].UserNumber;                $("#num").html(Number(onlinePels)+1);            },            error: function(data,XMLHttpRequest,textStatus,errorThrown){                if(XMLHttpRequest.status==400){                    console.log("respone:400");                }                if(XMLHttpRequest.status==404){                    console.log("time out");                }            }        });    }    //百度播放器    function InitPlayer(width,height){        var player = cyberplayer("playercontainer").setup({            width: width,            height: height,            stretching: "uniform",            file: "",            autostart: true,            repeat: true,            isLive: true, // 必须设置，表明是直播视频            file: "",            controlbar: {                barLogo: false, // 进度条上的logo可隐藏            },            volume: 100,            controls: true,            hls: {                reconnecttime: 5 // hls直播重连间隔秒数            },            ak: ''        });    }</script></body></html>